# Анализ данных о составе Верховного суда через Selenium

## Цель
Сбор и систематизация данных о составе Верховного Суда РФ, включая должности и карьерные траектории судей, с использованием инструмента Selenium для автоматизации парсинга информации с официального сайта Верховного Суда.

## Задачи
1. Изучить структуру веб-ресурса ([https://vsrf.ru/about/structure/?section=supreme](https://vsrf.ru/about/structure/?section=supreme)) и определить ключевые информационные объекты для сбора данных.
2. Разработать алгоритм парсинга с применением библиотеки Selenium для автоматизированного сбора данных.
3. Собрать информацию о судьях и их карьерных траекториях из всех доступных подразделений Верховного Суда РФ.
4. Проанализировать полученные данные, включая статистику по кадровому составу.

## Описание кода
Код представляет собой веб-скрапер для сбора информации о судьях с официального сайта Верховного Суда Российской Федерации ([vsrf.ru](https://vsrf.ru)). Выходные данные сохраняются в структурированный JSON-файл, содержащий иерархию:  
**Разделы → Подразделы → Судьи** с полной информацией по каждому.  
Код разделен на логические функции и содержит обработку ошибок для устойчивой работы.

---

## Функциональные модули

### 1. `setup_driver()`
- **Назначение**: Настройка и инициализация веб-драйвера (Microsoft Edge).
- **Особенности**:
  - Запуск браузера в максимальном окне (`--start-maximized`).
  - Отключение GPU (`--disable-gpu`).
  - Удаление лишних логов (`excludeSwitches`).

### 2. `get_judge_details(driver, url)`
- **Назначение**: Парсинг детальной информации о судье с его персональной страницы.
- **Собираемые данные**:
  - Имя, должность, квалификационный класс, дата назначения.
  - Карьера, образование, награды (если данные не найдены, подставляется "Не указано").
- **Особенности**:
  - Открывает URL судьи в новой вкладке.
  - Закрывает вкладку после сбора данных.

### 3. `process_subsection(driver, subsection_url)`
- **Назначение**: Обработка подраздела.
- **Действия**:
  - Переход по URL подраздела.
  - Поиск блоков с судьями (`.vs-structure-list-persons > div.clearfix`).
  - Для каждого судьи извлекаются: имя, должность, URL фото.
  - Дополнение информации через вызов `get_judge_details()`.
- **Возвращает**: Список словарей с данными судей.

### 4. `get_all_structure_sections(driver)`
- **Назначение**: Получение всех основных разделов суда.
- **Действия**:
  - Загрузка главной страницы структуры.
  - Поиск вкладок разделов и сохранение их названия, кода и URL.
- **Возвращает**: Список разделов.

### 5. `get_subsections_for_section(driver, section_url)`
- **Назначение**: Получение подразделов внутри раздела.
- **Действия**:
  - Переход по URL раздела.
  - Поиск меню подразделов и извлечение названия, URL и кода.
  - Если подразделов нет, добавляется "Основной раздел" с URL исходного раздела.
- **Возвращает**: Список подразделов.

### 6. `scrape_judicial_structure()`
- **Назначение**: Главная функция, управляющая всем процессом сбора данных.
- **Действия**:
  1. Инициализация драйвера (`setup_driver()`).
  2. Получение всех разделов (`get_all_structure_sections()`).
  3. Для каждого раздела получение подразделов (`get_subsections_for_section()`).
  4. Для каждого подраздела сбор данных о судьях (`process_subsection()`).
  5. Сохранение данных в JSON-файл:
     - Создание папки для файла, если ее нет.
     - Запись данных в формате JSON с отступами.
  6. Вывод статистики (количество разделов, подразделов, судей).
  7. Закрытие драйвера.

---

## Дополнительные особенности
- **Обработка ошибок**:
  - `TimeoutException` — если элемент не загрузился.
  - `NoSuchElementException` — если элемент отсутствует.
  - Общие исключения (`Exception`) для перехвата неожиданных ошибок.
- **Логирование**: Вывод в консоль на каждом этапе (например, "Обработка раздела: Президиум").
- **Ожидания**: Использование `WebDriverWait` для стабильной загрузки элементов.

## Технические особенности
- Используется Selenium с браузером Edge.
- Применяются ожидания для корректной загрузки элементов.
- Работает через имитацию действий пользователя (открытие вкладок и т.д.).

---

## Выходные данные
Структурированный JSON-файл (`judges_data.json`), содержащий:
- Разделы суда.
- Подразделы внутри каждого раздела.
- Данные о судьях:
  - Имя, должность, фото.
  - Квалификационный класс, дата назначения.
  - Карьерная траектория, образование, награды.

## Пример структуры JSON
```json
[
  {
    "section_name": "Президиум",
    "section_code": "presidium",
    "subsections_count": 1,
    "subsections": [
      {
        "subsection_name": "Основной раздел",
        "subsection_url": "https://vsrf.ru/about/structure/?section=presidium",
        "subsection_code": null,
        "judges_count": 10,
        "judges": [
          {
            "name": "Иванов И.И.",
            "position": "Судья",
            "photo_url": "https://vsrf.ru/photo.jpg",
            "career": ["2000: Назначен судьей"],
            "education": "Юридический университет",
            "awards": "Не указано"
          }
        ]
      }
    ]
  }
]
```

## Запуск
1. Установите зависимости:
   ```bash
   pip install selenium
   ```
2. Загрузите драйвер для Microsoft Edge и укажите путь к нему в переменной `EDGE_DRIVER_PATH`.
3. Запустите скрипт:
   ```bash
   python court.py
   ```
